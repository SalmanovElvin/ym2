import React, { useEffect, useState, useRef } from "react";
import {
  Dimensions,
  View,
  Text,
  StyleSheet,
  ScrollView,
  Button,
  FlatList,
  Image,
  TouchableOpacity,
  TouchableWithoutFeedback,
  ActivityIndicator,
  Platform,
  TextInput,
  KeyboardAvoidingView,
  Linking,
} from "react-native";
import { useMutation, useQuery } from "@apollo/client";
import Svg, {
  G,
  Circle,
  Path,
  Defs,
  ClipPath,
  Rect,
  Ellipse,
} from "react-native-svg";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { DOCUMENTS } from "../../../graph/queries/documents";
import Carousel, { Pagination } from "react-native-snap-carousel";
import { WebView } from 'react-native-webview';
import { HeaderInPages } from "../header/HeaderInPages";


const { width: screenWidth, height: screenHeight } = Dimensions.get("window");

export const Documents = ({ navigation, route }) => {

  const [selectedDoc, setSelectedDoc] = useState(null);
  const [filteredDocuments, setFilteredDocuments] = useState([]);


  const [userData, setUserData] = useState(null);
  const [unionData, setUnionData] = useState("");

  const [docs, setDocs] = useState([]);
  const [docTypes, setDocTypes] = useState([]);

  useEffect(() => {
    const getData = async () => {
      try {
        const value = await AsyncStorage.getItem("UNION"); // Replace 'key' with your actual key

        if (value !== null) {
          setUnionData(JSON.parse(value));
        } else {
          console.log("No union data found");
        }

        const userVal = await AsyncStorage.getItem("@USER"); // Replace 'key' with your actual key

        if (userVal !== null && JSON.parse(userVal).username !== undefined) {
          setUserData(JSON.parse(userVal));
        } else {
          console.log("No user data found");
        }
      } catch (error) {
        console.error("Error retrieving data:", error);
      }
    };
    getData();
  }, []);


  useEffect(() => {
    setFilteredDocuments(docs.filter(doc => doc.docType === selectedDoc));
  }, [selectedDoc])


  const { data, loading, refetch } = useQuery(DOCUMENTS, {
    variables: {
      unionID: userData?.unionID,
      category: "Union-Profile",
    },
    onCompleted: () => {
      setDocs(data?.documents);
      // console.log(data?.documents);
      const arr = [];
      for (let i = 0; i < data?.documents?.length; i++) {
        let isUnique = true;
        for (let j = 0; j < arr.length; j++) {
          if (data?.documents[i]?.docType === arr[j]) {
            isUnique = false;
            break;
          }
        }
        if (isUnique) {
          arr.push(data?.documents[i]?.docType);
        }
      }
      setDocTypes(arr);
      setSelectedDoc("YOUnified Tutorials");
    },
    onError: (error) => {
      console.error("Query Error", error); // eslint-disable-line
    },
  });


  const [openDoc, setOpenDoc] = useState(false);
  const [openedFile, setOpenedFile] = useState(null);
  const isFile = (url) => {
    return /\.(pdf|doc|docx|xls|xlsx|ppt|pptx)$/i.test(url);
  };




  return (
    <>
      <HeaderInPages title="Documents" />
      {docTypes.length === 0 ?
        <View style={{ alignItems: "center", justifyContent: "center", flex: 1 }}>
          <ActivityIndicator size="large" color="blue" />
        </View>
        :
        <View style={{ backgroundColor: '#FCFEFF', flex: 1 }}>
          <View style={styles.wrapper}>
            <Carousel
              data={docTypes}
              renderItem={({ item }) =>
                <View
                  style={item === selectedDoc ? {
                    borderBottomColor: "#34519A",
                    borderBottomWidth: 3,
                    borderStyle: "solid",
                  } : {}}
                >
                  <Text
                    onPress={() => setSelectedDoc(item)}
                    style={{
                      textAlign: "center",
                      paddingVertical: 24,
                      paddingHorizontal: 10,
                      fontSize: 16,
                      fontWeight: "500",
                      color: "#696666",
                    }}
                  >
                    {item === "" ? "General" : item}
                  </Text>
                </View>
              }
              sliderWidth={screenWidth}
              itemWidth={screenWidth / 2.2}
            // onSnapToItem={index => onTabPress(docTypes[index].id)}
            />
          </View>
          <ScrollView style={{ paddingVertical: 10, paddingHorizontal: 14 }}>

            {filteredDocuments.map((item) => (
              <TouchableOpacity onPress={() => { setOpenedFile(item); setOpenDoc(true); }} key={item.id} activeOpacity={0.6} style={styles.block}>

                {item.url.split('.').pop().toLowerCase() === "jpeg" ?
                  <Svg width="26" height="32" viewBox="0 0 26 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <Path d="M18.1344 0H1.55036C1.08864 0 0.714355 0.374286 0.714355 1.10057V31.0859C0.714355 31.2831 1.08864 32 1.55036 32H24.4498C24.9115 32 25.2858 31.2479 25.2858 31.0508V7.416C25.2858 7.01829 25.2326 6.89029 25.1389 6.796L18.4898 0.146857C18.3955 0.0531429 18.2675 0 18.1344 0Z" fill="#E9E9E0" />
                    <Path d="M24.4498 31.9996H1.55036C1.08864 31.9996 0.714355 31.6253 0.714355 31.1636V22.2853H25.2858V31.1636C25.2858 31.6253 24.9115 31.9996 24.4498 31.9996Z" fill="#FF6D1B" />
                    <Path d="M18.4285 0.0865479V6.85741H25.1993L18.4285 0.0865479Z" fill="#D9D7CA" />
                    <Path d="M11.6521 30.2853H10.7144V24.5276H12.3704C12.6149 24.5276 12.8572 24.5664 13.0966 24.6447C13.3361 24.723 13.5509 24.8402 13.7412 24.9962C13.9315 25.1522 14.0852 25.3413 14.2024 25.5624C14.3195 25.7836 14.3784 26.0322 14.3784 26.3087C14.3784 26.6007 14.3286 26.8647 14.2298 27.1019C14.1309 27.339 13.9926 27.5384 13.8155 27.6996C13.6384 27.8607 13.4246 27.9859 13.1749 28.0744C12.9252 28.163 12.6486 28.207 12.3469 28.207H11.6515V30.2853H11.6521ZM11.6521 25.2384V27.5196H12.5115C12.6258 27.5196 12.7389 27.5002 12.8515 27.4607C12.9635 27.4219 13.0664 27.3579 13.1601 27.2693C13.2538 27.1807 13.3292 27.0573 13.3864 26.8984C13.4435 26.7396 13.4721 26.543 13.4721 26.3087C13.4721 26.215 13.4589 26.1064 13.4332 25.9847C13.4069 25.8624 13.3538 25.7453 13.2732 25.6333C13.1921 25.5213 13.0789 25.4276 12.9332 25.3522C12.7875 25.2767 12.5944 25.239 12.3549 25.239H11.6521V25.2384Z" fill="white" />
                    <Path d="M19.5822 27.3169V29.5432C19.4622 29.6947 19.3285 29.8175 19.1799 29.9141C19.0314 30.0107 18.8754 30.0901 18.7114 30.1524C18.5474 30.2147 18.3776 30.2592 18.2034 30.2855C18.0285 30.3118 17.8559 30.3244 17.6839 30.3244C17.3399 30.3244 17.0239 30.2621 16.7348 30.1369C16.4456 30.0118 16.1931 29.8272 15.9771 29.5821C15.7611 29.3369 15.5914 29.0301 15.4691 28.6604C15.3468 28.2907 15.2856 27.8632 15.2856 27.3792C15.2856 26.8952 15.3468 26.4689 15.4691 26.1021C15.5914 25.7347 15.7605 25.4289 15.9771 25.1844C16.1931 24.9392 16.4468 24.7535 16.7388 24.6255C17.0302 24.4975 17.3456 24.4341 17.6839 24.4341C17.9965 24.4341 18.2879 24.4861 18.5588 24.5901C18.8296 24.6947 19.0714 24.8507 19.2851 25.0587L18.6365 25.6369C18.5114 25.4855 18.3679 25.3764 18.2068 25.3089C18.0451 25.2415 17.8788 25.2072 17.7068 25.2072C17.5142 25.2072 17.3302 25.2432 17.1559 25.3164C16.9811 25.3895 16.8251 25.5129 16.6874 25.6872C16.5491 25.8621 16.4411 26.0867 16.3634 26.3632C16.2856 26.6398 16.2434 26.9775 16.2382 27.3787C16.2434 27.7695 16.2839 28.1078 16.3594 28.3941C16.4348 28.6804 16.5388 28.9147 16.6719 29.0969C16.8051 29.2792 16.9559 29.4147 17.1251 29.5032C17.2942 29.5918 17.4725 29.6358 17.6605 29.6358C17.7176 29.6358 17.7942 29.6318 17.8908 29.6238C17.9868 29.6158 18.0834 29.6032 18.1799 29.5849C18.2759 29.5667 18.3685 29.5421 18.4571 29.5107C18.5456 29.4792 18.6108 29.4352 18.6525 29.3781V27.9564H17.6759V27.3158H19.5822V27.3169Z" fill="white" />
                    <Path d="M8.93922 24.5594H7.98418V28.3108C7.98418 28.9908 7.83902 29.3652 7.22015 29.3652C6.63949 29.3652 6.4714 29.0061 6.4714 28.3873V28.1046H5.51636V28.3949C5.51636 29.3958 5.99006 30.1445 7.14375 30.1445C8.71002 30.1445 8.93922 29.2048 8.93922 28.2574V24.5594Z" fill="white" />
                    <Path d="M7.81789 10.8565C9.25982 10.8565 10.4287 9.68756 10.4287 8.24562C10.4287 6.80369 9.25982 5.63477 7.81789 5.63477C6.37595 5.63477 5.20703 6.80369 5.20703 8.24562C5.20703 9.68756 6.37595 10.8565 7.81789 10.8565Z" fill="#F3D55B" />
                    <Path d="M0.714355 22.2864H7.00007H25.2858V16.0007L19.5715 10.5721L13.5715 17.1436L10.4384 14.0104L0.714355 22.2864Z" fill="#FF995F" />
                  </Svg>
                  :
                  item.url.split('.').pop().toLowerCase() === "pdf" ?
                    <Svg width="26" height="32" viewBox="0 0 26 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <Path d="M18.1344 0H1.55036C1.08864 0 0.714355 0.374286 0.714355 1.10057V31.4286C0.714355 31.6257 1.08864 32 1.55036 32H24.4498C24.9115 32 25.2858 31.6257 25.2858 31.4286V7.416C25.2858 7.01829 25.2326 6.89029 25.1389 6.796L18.4898 0.146857C18.3955 0.0531429 18.2675 0 18.1344 0Z" fill="#E9E9E0" />
                      <Path d="M18.429 0.0866699V6.85753H25.1998L18.429 0.0866699Z" fill="#D9D7CA" />
                      <Path d="M8.15071 19.0422C7.95185 19.0422 7.76099 18.9777 7.59814 18.856C7.00328 18.4097 6.92328 17.9131 6.96099 17.5748C7.06499 16.6445 8.21528 15.6708 10.381 14.6788C11.2404 12.7954 12.0581 10.4748 12.5456 8.53596C11.9753 7.29482 11.421 5.68453 11.825 4.73996C11.9667 4.4091 12.1433 4.15539 12.473 4.04567C12.6033 4.00224 12.9324 3.94739 13.0536 3.94739C13.3416 3.94739 13.5947 4.31824 13.7741 4.54682C13.9427 4.76167 14.325 5.2171 13.561 8.43367C14.3313 10.0245 15.4227 11.6451 16.4684 12.7548C17.2176 12.6194 17.8621 12.5502 18.3873 12.5502C19.2821 12.5502 19.8244 12.7588 20.0456 13.1885C20.2284 13.544 20.1536 13.9594 19.8227 14.4228C19.5044 14.868 19.0656 15.1034 18.5541 15.1034C17.8593 15.1034 17.0501 14.6645 16.1478 13.7977C14.5267 14.1365 12.6336 14.7411 11.1033 15.4102C10.6256 16.424 10.1679 17.2405 9.74157 17.8394C9.15585 18.6594 8.65071 19.0422 8.15071 19.0422ZM9.67185 16.1131C8.45071 16.7994 7.95299 17.3634 7.91699 17.6811C7.91128 17.7337 7.89585 17.872 8.16328 18.0765C8.24842 18.0497 8.74557 17.8228 9.67185 16.1131ZM17.4644 13.5748C17.9301 13.9331 18.0438 14.1142 18.3484 14.1142C18.4821 14.1142 18.8633 14.1085 19.0399 13.8622C19.125 13.7428 19.1581 13.6662 19.1713 13.6251C19.101 13.588 19.0078 13.5125 18.4999 13.5125C18.2113 13.5131 17.8484 13.5257 17.4644 13.5748ZM13.1959 9.81367C12.7873 11.2274 12.2479 12.7537 11.6679 14.136C12.8621 13.6725 14.1604 13.268 15.3799 12.9817C14.6084 12.0857 13.8376 10.9668 13.1959 9.81367ZM12.849 4.97824C12.793 4.9971 12.089 5.98224 12.9039 6.81596C13.4461 5.60739 12.8736 4.97024 12.849 4.97824Z" fill="#CC4B4C" />
                      <Path d="M24.4498 31.9997H1.55036C1.08864 31.9997 0.714355 31.6254 0.714355 31.1637V22.2854H25.2858V31.1637C25.2858 31.6254 24.9115 31.9997 24.4498 31.9997Z" fill="#CC4B4C" />
                      <Path d="M6.93527 30.2863H5.99756V24.5286H7.65356C7.89813 24.5286 8.14042 24.5674 8.37984 24.6457C8.61927 24.724 8.83413 24.8411 9.02442 24.9971C9.2147 25.1531 9.36842 25.3423 9.48556 25.5634C9.6027 25.7846 9.66156 26.0331 9.66156 26.3097C9.66156 26.6017 9.61184 26.8657 9.51299 27.1029C9.41413 27.34 9.27584 27.5394 9.0987 27.7006C8.92156 27.8617 8.70784 27.9869 8.45813 28.0754C8.20842 28.164 7.93184 28.208 7.63013 28.208H6.9347V30.2863H6.93527ZM6.93527 25.2394V27.5206H7.7947C7.90899 27.5206 8.02213 27.5011 8.1347 27.4617C8.2467 27.4228 8.34956 27.3589 8.44327 27.2703C8.53699 27.1817 8.61242 27.0583 8.66956 26.8994C8.7267 26.7406 8.75527 26.544 8.75527 26.3097C8.75527 26.216 8.74213 26.1074 8.71642 25.9857C8.69013 25.8634 8.63699 25.7463 8.55642 25.6343C8.47527 25.5223 8.36213 25.4286 8.21642 25.3531C8.0707 25.2777 7.87756 25.24 7.63813 25.24H6.93527V25.2394Z" fill="white" />
                      <Path d="M15.411 27.2468C15.411 27.7205 15.3602 28.1257 15.2585 28.4617C15.1567 28.7977 15.0282 29.0788 14.8716 29.3057C14.715 29.5325 14.5396 29.7108 14.3442 29.8411C14.1487 29.9714 13.9602 30.0685 13.7779 30.1342C13.5956 30.1994 13.4287 30.2411 13.2779 30.2594C13.127 30.2765 13.015 30.2857 12.9419 30.2857H10.7625V24.528H12.4967C12.9813 24.528 13.407 24.6051 13.7739 24.7582C14.1407 24.9114 14.4459 25.1165 14.6882 25.3714C14.9305 25.6262 15.111 25.9171 15.231 26.2422C15.351 26.568 15.411 26.9028 15.411 27.2468ZM12.6299 29.5982C13.2653 29.5982 13.7236 29.3954 14.0047 28.9891C14.2859 28.5828 14.4265 27.9942 14.4265 27.2234C14.4265 26.984 14.3979 26.7468 14.3407 26.5125C14.283 26.2782 14.1727 26.0662 14.0087 25.876C13.8447 25.6857 13.6219 25.532 13.3407 25.4148C13.0596 25.2977 12.695 25.2388 12.247 25.2388H11.7002V29.5982H12.6299Z" fill="white" />
                      <Path d="M17.7234 25.2388V27.0514H20.1297V27.692H17.7234V30.2857H16.7703V24.528H20.3714V25.2388H17.7234Z" fill="white" />
                    </Svg>
                    :
                    item.url.split('.').pop().toLowerCase() === "png" ?
                      <Svg width="26" height="32" viewBox="0 0 26 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <Path d="M18.1344 0H1.55036C1.08864 0 0.714355 0.374286 0.714355 1.10057V31.4286C0.714355 31.6257 1.08864 32 1.55036 32H24.4498C24.9115 32 25.2858 31.6257 25.2858 31.4286V7.416C25.2858 7.01829 25.2326 6.89029 25.1389 6.796L18.4898 0.146857C18.3955 0.0531429 18.2675 0 18.1344 0Z" fill="#E9E9E0" />
                        <Path d="M24.4498 31.9997H1.55036C1.08864 31.9997 0.714355 31.6254 0.714355 31.1637V22.2854H25.2858V31.1637C25.2858 31.6254 24.9115 31.9997 24.4498 31.9997Z" fill="#659C35" />
                        <Path d="M18.4282 0.0866699V6.85753H25.1991L18.4282 0.0866699Z" fill="#D9D7CA" />
                        <Path d="M6.9343 30.286H5.99658V24.5283H7.65258C7.89715 24.5283 8.13944 24.5672 8.37887 24.6455C8.6183 24.7237 8.83315 24.8409 9.02344 24.9969C9.21372 25.1529 9.36744 25.342 9.48458 25.5632C9.60172 25.7843 9.66058 26.0329 9.66058 26.3095C9.66058 26.6015 9.61087 26.8655 9.51201 27.1026C9.41315 27.3397 9.27487 27.5392 9.09772 27.7003C8.92058 27.8615 8.70687 27.9866 8.45715 28.0752C8.20744 28.1637 7.93087 28.2077 7.62915 28.2077H6.93372V30.286H6.9343ZM6.9343 25.2392V27.5203H7.79372C7.90801 27.5203 8.02115 27.5009 8.13372 27.4615C8.24572 27.4226 8.34858 27.3586 8.4423 27.27C8.53601 27.1815 8.61144 27.058 8.66858 26.8992C8.72572 26.7403 8.7543 26.5437 8.7543 26.3095C8.7543 26.2157 8.74115 26.1072 8.71544 25.9855C8.68915 25.8632 8.63601 25.746 8.55544 25.634C8.4743 25.522 8.36115 25.4283 8.21544 25.3529C8.06973 25.2775 7.87658 25.2397 7.63715 25.2397H6.9343V25.2392Z" fill="white" />
                        <Path d="M14.8945 24.5283V30.286H13.9413L11.6836 26.3175V30.286H10.7305V24.5283H11.6836L13.9413 28.4969V24.5283H14.8945Z" fill="white" />
                        <Path d="M20.52 27.3174V29.5437C20.4 29.6951 20.2662 29.818 20.1177 29.9146C19.9691 30.0111 19.8131 30.0906 19.6491 30.1529C19.4851 30.2151 19.3154 30.2597 19.1411 30.286C18.9662 30.3123 18.7937 30.3249 18.6217 30.3249C18.2777 30.3249 17.9617 30.2626 17.6725 30.1374C17.3834 30.0123 17.1308 29.8277 16.9148 29.5826C16.6988 29.3374 16.5291 29.0306 16.4068 28.6609C16.2845 28.2911 16.2234 27.8637 16.2234 27.3797C16.2234 26.8957 16.2845 26.4694 16.4068 26.1026C16.5291 25.7351 16.6982 25.4294 16.9148 25.1849C17.1308 24.9397 17.3845 24.754 17.6765 24.626C17.968 24.498 18.2834 24.4346 18.6217 24.4346C18.9342 24.4346 19.2257 24.4866 19.4965 24.5906C19.7674 24.6951 20.0091 24.8511 20.2228 25.0591L19.5742 25.6374C19.4491 25.486 19.3057 25.3769 19.1445 25.3094C18.9828 25.242 18.8165 25.2077 18.6445 25.2077C18.452 25.2077 18.268 25.2437 18.0937 25.3169C17.9188 25.39 17.7628 25.5134 17.6251 25.6877C17.4868 25.8626 17.3788 26.0871 17.3011 26.3637C17.2234 26.6403 17.1811 26.978 17.176 27.3791C17.1811 27.77 17.2217 28.1083 17.2971 28.3946C17.3725 28.6809 17.4765 28.9151 17.6097 29.0974C17.7428 29.2797 17.8937 29.4151 18.0628 29.5037C18.232 29.5923 18.4102 29.6363 18.5982 29.6363C18.6554 29.6363 18.732 29.6323 18.8285 29.6243C18.9245 29.6163 19.0211 29.6037 19.1177 29.5854C19.2137 29.5671 19.3062 29.5426 19.3948 29.5111C19.4834 29.4797 19.5485 29.4357 19.5902 29.3786V27.9569H18.6137V27.3163H20.52V27.3174Z" fill="white" />
                        <Path d="M7.81813 10.8568C9.26007 10.8568 10.429 9.68793 10.429 8.24599C10.429 6.80405 9.26007 5.63513 7.81813 5.63513C6.3762 5.63513 5.20728 6.80405 5.20728 8.24599C5.20728 9.68793 6.3762 10.8568 7.81813 10.8568Z" fill="#F3D55B" />
                        <Path d="M0.714355 22.2859H7.00007H25.2858V16.0002L19.5715 10.5717L13.5715 17.1431L10.4384 14.0099L0.714355 22.2859Z" fill="#88C057" />
                      </Svg>
                      :
                      item.url.split('.').pop().toLowerCase() === "docx" || item.url.split('.').pop().toLowerCase() === "doc" ?
                        <Svg width="30" height="28" viewBox="0 0 30 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <Path d="M17.1269 0.631397C16.9876 0.51828 16.8043 0.475036 16.6293 0.514044L1.37099 4.03519C1.10245 4.09692 0.912968 4.33713 0.915553 4.61266V24.5658C0.915664 24.8554 1.12699 25.1016 1.41319 25.1457L16.6715 27.4931C16.9918 27.5423 17.2915 27.3226 17.3407 27.0023C17.3452 26.9729 17.3475 26.9431 17.3475 26.9133V1.09151C17.3481 0.912539 17.2668 0.743139 17.1269 0.631397Z" fill="#1565C0" />
                          <Path d="M28.4974 25.1526H16.7602C16.4361 25.1526 16.1733 24.8898 16.1733 24.5657C16.1733 24.2416 16.4361 23.9789 16.7602 23.9789H27.9105V4.02575H16.7602C16.4361 4.02575 16.1733 3.76298 16.1733 3.43887C16.1733 3.11476 16.4361 2.85205 16.7602 2.85205H28.4973C28.8215 2.85205 29.0842 3.11482 29.0842 3.43893V24.5658C29.0842 24.8899 28.8215 25.1526 28.4974 25.1526Z" fill="#1565C0" />
                          <Path d="M10.8915 19.284C10.63 19.2837 10.4003 19.1104 10.3281 18.8591L8.54404 12.6172L6.75998 18.8591C6.63113 19.1705 6.27417 19.3186 5.96266 19.1897C5.8129 19.1278 5.69395 19.0088 5.632 18.8591L3.28461 10.6431C3.18635 10.3342 3.35712 10.0042 3.66599 9.90595C3.97486 9.80768 4.30486 9.97846 4.40312 10.2873C4.40659 10.2982 4.40972 10.3092 4.41259 10.3203L6.19659 16.5609L7.98066 10.3191C8.10951 10.0077 8.46647 9.85962 8.77798 9.98847C8.92774 10.0504 9.04669 10.1694 9.10864 10.3191L10.8915 16.561L12.6756 10.3203C12.76 10.0115 13.0789 9.82953 13.3878 9.91398C13.3922 9.91519 13.3965 9.91645 13.4009 9.91772C13.7123 10.007 13.8925 10.3316 13.8035 10.6431L11.456 18.8591C11.3837 19.1108 11.1534 19.2842 10.8915 19.284Z" fill="#FAFAFA" />
                          <Path d="M26.1507 7.54655H16.7609C16.4368 7.54655 16.1741 7.28379 16.1741 6.95968C16.1741 6.63557 16.4368 6.3728 16.7609 6.3728H26.1507C26.4748 6.3728 26.7376 6.63557 26.7376 6.95968C26.7376 7.28384 26.4748 7.54655 26.1507 7.54655Z" fill="#1565C0" />
                          <Path d="M26.1502 11.0668H16.7605C16.4363 11.0668 16.1736 10.8041 16.1736 10.4799C16.1736 10.1558 16.4363 9.89307 16.7605 9.89307H26.1502C26.4743 9.89307 26.7371 10.1558 26.7371 10.4799C26.7371 10.8041 26.4743 11.0668 26.1502 11.0668Z" fill="#1565C0" />
                          <Path d="M26.1502 14.5883H16.7605C16.4363 14.5883 16.1736 14.3255 16.1736 14.0014C16.1736 13.6773 16.4363 13.4146 16.7605 13.4146H26.1502C26.4743 13.4146 26.7371 13.6773 26.7371 14.0014C26.7371 14.3256 26.4743 14.5883 26.1502 14.5883Z" fill="#1565C0" />
                          <Path d="M26.1502 18.11H16.7605C16.4363 18.11 16.1736 17.8473 16.1736 17.5232C16.1736 17.199 16.4363 16.9363 16.7605 16.9363H26.1502C26.4743 16.9363 26.7371 17.199 26.7371 17.5232C26.7371 17.8473 26.4743 18.11 26.1502 18.11Z" fill="#1565C0" />
                          <Path d="M26.1502 21.6305H16.7605C16.4363 21.6305 16.1736 21.3678 16.1736 21.0437C16.1736 20.7196 16.4363 20.4568 16.7605 20.4568H26.1502C26.4743 20.4568 26.7371 20.7196 26.7371 21.0437C26.7371 21.3678 26.4743 21.6305 26.1502 21.6305Z" fill="#1565C0" />
                        </Svg>
                        :
                        item.url.split('.').pop().toLowerCase() === "xlsx" || item.url.split('.').pop().toLowerCase() === "xls" ?
                          <Svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <Path d="M16.1137 0.712147C15.9753 0.599713 15.7931 0.55673 15.6191 0.595502L0.452957 4.09538C0.186037 4.15674 -0.0023001 4.3955 0.000270128 4.66936V24.502C0.000379499 24.7898 0.210427 25.0346 0.494901 25.0784L15.661 27.4116C15.9795 27.4606 16.2773 27.2422 16.3262 26.9238C16.3307 26.8945 16.333 26.8649 16.333 26.8353V1.16948C16.3335 0.99159 16.2528 0.823213 16.1137 0.712147Z" fill="#4CAF50" />
                            <Path d="M27.4166 25.0858H15.7503C15.4282 25.0858 15.167 24.8246 15.167 24.5025C15.167 24.1803 15.4282 23.9191 15.7503 23.9191H26.8333V4.08653H15.7503C15.4282 4.08653 15.167 3.82535 15.167 3.5032C15.167 3.18105 15.4282 2.91992 15.7503 2.91992H27.4166C27.7387 2.91992 27.9999 3.1811 27.9999 3.50325V24.5025C27.9999 24.8247 27.7388 25.0858 27.4166 25.0858Z" fill="#4CAF50" />
                            <Path d="M11.0835 19.253C10.8824 19.253 10.6955 19.1494 10.5889 18.9789L4.75574 9.64585C4.57643 9.37821 4.64807 9.01587 4.9157 8.83655C5.18333 8.65724 5.54568 8.72888 5.72499 8.99651C5.73204 9.00701 5.73872 9.01773 5.74506 9.02866L11.5782 18.3617C11.7483 18.6353 11.6644 18.995 11.3908 19.1651C11.2985 19.2224 11.1921 19.2528 11.0835 19.253Z" fill="#FAFAFA" />
                            <Path d="M5.25059 19.2524C4.92843 19.2517 4.6678 18.99 4.66846 18.6679C4.66868 18.559 4.69941 18.4523 4.7571 18.3599L10.5903 9.02688C10.7518 8.74814 11.1087 8.65315 11.3874 8.8147C11.6661 8.97624 11.7611 9.33317 11.5996 9.61185C11.5932 9.62278 11.5866 9.6335 11.5795 9.644L5.74642 18.977C5.63989 19.1484 5.45238 19.2525 5.25059 19.2524Z" fill="#FAFAFA" />
                            <Path d="M20.4178 25.0854C20.0957 25.0854 19.8345 24.8242 19.8345 24.502V3.50276C19.8345 3.18061 20.0957 2.91943 20.4178 2.91943C20.74 2.91943 21.0011 3.18061 21.0011 3.50276V24.502C21.0011 24.8242 20.74 25.0854 20.4178 25.0854Z" fill="#4CAF50" />
                            <Path d="M27.4166 21.5861H15.7503C15.4282 21.5861 15.167 21.3249 15.167 21.0028C15.167 20.6806 15.4282 20.4194 15.7503 20.4194H27.4166C27.7387 20.4194 27.9999 20.6806 27.9999 21.0028C27.9999 21.325 27.7388 21.5861 27.4166 21.5861Z" fill="#4CAF50" />
                            <Path d="M27.4166 18.0861H15.7503C15.4282 18.0861 15.167 17.8249 15.167 17.5028C15.167 17.1806 15.4282 16.9194 15.7503 16.9194H27.4166C27.7387 16.9194 27.9999 17.1806 27.9999 17.5028C27.9999 17.825 27.7388 18.0861 27.4166 18.0861Z" fill="#4CAF50" />
                            <Path d="M27.4166 14.5861H15.7503C15.4282 14.5861 15.167 14.3249 15.167 14.0028C15.167 13.6806 15.4282 13.4194 15.7503 13.4194H27.4166C27.7387 13.4194 27.9999 13.6806 27.9999 14.0028C27.9999 14.325 27.7388 14.5861 27.4166 14.5861Z" fill="#4CAF50" />
                            <Path d="M27.4166 11.0861H15.7503C15.4282 11.0861 15.167 10.8249 15.167 10.5028C15.167 10.1806 15.4282 9.91943 15.7503 9.91943H27.4166C27.7387 9.91943 27.9999 10.1806 27.9999 10.5028C27.9999 10.8249 27.7388 11.0861 27.4166 11.0861Z" fill="#4CAF50" />
                            <Path d="M27.4166 7.5861H15.7503C15.4282 7.5861 15.167 7.32492 15.167 7.00276C15.167 6.68061 15.4282 6.41943 15.7503 6.41943H27.4166C27.7387 6.41943 27.9999 6.68061 27.9999 7.00276C27.9999 7.32497 27.7388 7.5861 27.4166 7.5861Z" fill="#4CAF50" />
                          </Svg>
                          :
                          <Svg width="30" height="28" viewBox="0 0 30 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <Path d="M17.1269 0.631397C16.9876 0.51828 16.8043 0.475036 16.6293 0.514044L1.37099 4.03519C1.10245 4.09692 0.912968 4.33713 0.915553 4.61266V24.5658C0.915664 24.8554 1.12699 25.1016 1.41319 25.1457L16.6715 27.4931C16.9918 27.5423 17.2915 27.3226 17.3407 27.0023C17.3452 26.9729 17.3475 26.9431 17.3475 26.9133V1.09151C17.3481 0.912539 17.2668 0.743139 17.1269 0.631397Z" fill="#1565C0" />
                            <Path d="M28.4974 25.1526H16.7602C16.4361 25.1526 16.1733 24.8898 16.1733 24.5657C16.1733 24.2416 16.4361 23.9789 16.7602 23.9789H27.9105V4.02575H16.7602C16.4361 4.02575 16.1733 3.76298 16.1733 3.43887C16.1733 3.11476 16.4361 2.85205 16.7602 2.85205H28.4973C28.8215 2.85205 29.0842 3.11482 29.0842 3.43893V24.5658C29.0842 24.8899 28.8215 25.1526 28.4974 25.1526Z" fill="#1565C0" />
                            <Path d="M10.8915 19.284C10.63 19.2837 10.4003 19.1104 10.3281 18.8591L8.54404 12.6172L6.75998 18.8591C6.63113 19.1705 6.27417 19.3186 5.96266 19.1897C5.8129 19.1278 5.69395 19.0088 5.632 18.8591L3.28461 10.6431C3.18635 10.3342 3.35712 10.0042 3.66599 9.90595C3.97486 9.80768 4.30486 9.97846 4.40312 10.2873C4.40659 10.2982 4.40972 10.3092 4.41259 10.3203L6.19659 16.5609L7.98066 10.3191C8.10951 10.0077 8.46647 9.85962 8.77798 9.98847C8.92774 10.0504 9.04669 10.1694 9.10864 10.3191L10.8915 16.561L12.6756 10.3203C12.76 10.0115 13.0789 9.82953 13.3878 9.91398C13.3922 9.91519 13.3965 9.91645 13.4009 9.91772C13.7123 10.007 13.8925 10.3316 13.8035 10.6431L11.456 18.8591C11.3837 19.1108 11.1534 19.2842 10.8915 19.284Z" fill="#FAFAFA" />
                            <Path d="M26.1507 7.54655H16.7609C16.4368 7.54655 16.1741 7.28379 16.1741 6.95968C16.1741 6.63557 16.4368 6.3728 16.7609 6.3728H26.1507C26.4748 6.3728 26.7376 6.63557 26.7376 6.95968C26.7376 7.28384 26.4748 7.54655 26.1507 7.54655Z" fill="#1565C0" />
                            <Path d="M26.1502 11.0668H16.7605C16.4363 11.0668 16.1736 10.8041 16.1736 10.4799C16.1736 10.1558 16.4363 9.89307 16.7605 9.89307H26.1502C26.4743 9.89307 26.7371 10.1558 26.7371 10.4799C26.7371 10.8041 26.4743 11.0668 26.1502 11.0668Z" fill="#1565C0" />
                            <Path d="M26.1502 14.5883H16.7605C16.4363 14.5883 16.1736 14.3255 16.1736 14.0014C16.1736 13.6773 16.4363 13.4146 16.7605 13.4146H26.1502C26.4743 13.4146 26.7371 13.6773 26.7371 14.0014C26.7371 14.3256 26.4743 14.5883 26.1502 14.5883Z" fill="#1565C0" />
                            <Path d="M26.1502 18.11H16.7605C16.4363 18.11 16.1736 17.8473 16.1736 17.5232C16.1736 17.199 16.4363 16.9363 16.7605 16.9363H26.1502C26.4743 16.9363 26.7371 17.199 26.7371 17.5232C26.7371 17.8473 26.4743 18.11 26.1502 18.11Z" fill="#1565C0" />
                            <Path d="M26.1502 21.6305H16.7605C16.4363 21.6305 16.1736 21.3678 16.1736 21.0437C16.1736 20.7196 16.4363 20.4568 16.7605 20.4568H26.1502C26.4743 20.4568 26.7371 20.7196 26.7371 21.0437C26.7371 21.3678 26.4743 21.6305 26.1502 21.6305Z" fill="#1565C0" />
                          </Svg>
                }

                <Text style={{ marginLeft: 15, color: '#2D2D2D', fontSize: 16, fontWeight: '400' }}>
                  {item.name}.{item.url.split('.').pop()}
                </Text>
              </TouchableOpacity>
            ))}

          </ScrollView>
          {openDoc ?
            <View style={styles.modalBack}>
              <View style={styles.modal}>
                <View style={{ height: screenHeight * 0.5 }}>
                  {openedFile.url.split('.').pop() === 'jpeg' || openedFile.url.split('.').pop() === "png" ?
                    <Image style={{ height: "100%", width: '100%' }} source={{ uri: openedFile.url }} />
                    :
                    <WebView
                      source={{ uri: `https://docs.google.com/viewer?url=${encodeURIComponent(openedFile.url)}` }}
                    />
                  }
                </View>
                <TouchableOpacity onPress={async () => await Linking.openURL(openedFile.url)} activeOpacity={0.7} style={{ ...styles.conf, backgroundColor: 'green' }}>
                  <Text style={styles.btnConf}>Download</Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={() => setOpenDoc(false)} activeOpacity={0.7} style={styles.conf}>
                  <Text style={styles.btnConf}>Close</Text>
                </TouchableOpacity>
              </View>
            </View>
            :
            <></>
          }
        </View>
      }
    </>
  );
};
const styles = StyleSheet.create({
  wrapper: {
    height: 72,
    alignItems: "center",
    justifyContent: "center",
    backgroundColor: "#EBECF0",
  },
  block: {
    marginBottom: 20,
    borderRadius: 15,
    backgroundColor: '#fff',
    paddingVertical: 18,
    paddingHorizontal: 24,
    shadowColor: "#4468C1",
    shadowOffset: {
      width: 0,
      height: 0,
    },
    shadowOpacity: 0.3,
    shadowRadius: 7,
    elevation: 5,
    flexDirection: 'row',
    alignItems: 'center'
  },
  modalBack: {
    zIndex: 999,
    width: '100%',
    position: 'absolute',
    backgroundColor: 'rgba(0, 0, 50, 0.5)',
    height: '100%',
    alignItems: 'center',
    justifyContent: 'center'
  },
  modal: {
    width: '90%',
    borderRadius: 10,
    backgroundColor: '#fff',
    padding: 15,
    justifyContent: 'space-between',
    shadowColor: "#4468c1",
    shadowOffset: {
      width: 0,
      height: 10,
    },
    shadowOpacity: 0.23,
    shadowRadius: 11.27,
  },
  errMsg: {
    fontSize: 16,
    fontWeight: '500',
    lineHeight: 22,
  },
  tip: {
    fontSize: 16,
    fontWeight: '500',
    lineHeight: 22,
    fontStyle: 'italic',
    color: 'green',
    marginBottom: 15,
  },
  conf: {
    width: "100%",
    backgroundColor: "#34519A",
    height: 56,
    justifyContent: "center",
    alignItems: 'center',
    marginVertical: 10,
    borderRadius: 5,
  },
  btnConf: {
    color: '#fff',
    fontWeight: '700',
    fontSize: 16

  },
});
